# Automated Golang User API (Fiber + GORM + Postgres)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á API `Create User` ‡∏î‡πâ‡∏ß‡∏¢ **Go + Fiber + GORM + Postgres** ‡∏Ñ‡∏£‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ó‡∏™ 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö (Unit / Integration / E2E) ‡πÅ‡∏•‡∏∞ Docker Compose ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ù‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏ô‡πâ‡∏ô **‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î** ‡πÑ‡∏•‡πà‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÑ‡∏ü‡∏•‡πå `docker-compose.yml`, `main.go` ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (`internal/user`) ‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

---

## ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

- [Stack ‡πÅ‡∏•‡∏∞ Requirements](#stack-‡πÅ‡∏•‡∏∞-requirements)
- [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå](#‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)
- [Docker Compose (Postgres)](#docker-compose-postgres)

  - [‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î](#‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î-compose)

- [‡∏£‡∏±‡∏ô‡πÅ‡∏≠‡∏õ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Postgres ‡πÉ‡∏ô Docker)](#‡∏£‡∏±‡∏ô‡πÅ‡∏≠‡∏õ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á-‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°-postgres-‡πÉ‡∏ô-docker)
- [‡πÑ‡∏ü‡∏•‡πå `main.go` ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î](#‡πÑ‡∏ü‡∏•‡πå-maingo-‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
- [‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô `internal/user`](#‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô-internaluser)

  - `model.go`
  - `repository.go`
  - `service.go`
  - `validator.go`
  - `handler.go`

- [‡∏™‡∏±‡∏ç‡∏ç‡∏≤ API (Contract)](#‡∏™‡∏±‡∏ç‡∏ç‡∏≤-api-contract)
- [‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö](#‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö)

  - Unit (Service/Handler)
  - Integration (Repository + Postgres via Testcontainers)
  - E2E (HTTP flow ‡∏à‡∏£‡∏¥‡∏á)
  - ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö

- [Troubleshooting & Notes](#troubleshooting--notes)
- [Next Steps](#next-steps)

---

## Stack ‡πÅ‡∏•‡∏∞ Requirements

- **Go** 1.22+
- **Fiber** v2 (‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏ü‡∏£‡∏°‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å)
- **GORM** (ORM) + ‡πÑ‡∏î‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå **Postgres**
- **Postgres 17** (‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Docker Compose)
- **testcontainers-go** (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Integration/E2E ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ Postgres ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå)

> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏ô‡πÄ‡∏ó‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢ Testcontainers ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Docker Desktop/Engine ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
automated-golang/
  docker-compose.yml
  go.mod
  main.go
  internal/user/
    model.go
    repository.go
    service.go
    validator.go
    handler.go
    # tests
    service_test.go                  # Unit (Service)
    handler_test.go                  # Unit (Handler)
    repo_integration_postgres_test.go# Integration (Postgres via Testcontainers)
    e2e_test.go                      # E2E (‡∏¢‡∏¥‡∏á HTTP ‡∏à‡∏£‡∏¥‡∏á)
```

---

## Docker Compose (Postgres)

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥) ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ß‡πâ:

```yaml
version: "3.8"

services:
  postgres:
    image: postgres:17
    ports:
      - "5432:5432"
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: postgres
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

> ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: ‡πÉ‡∏™‡πà **healthcheck** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ service ‡∏≠‡∏∑‡πà‡∏ô (‡πÄ‡∏ä‡πà‡∏ô‡πÅ‡∏≠‡∏õ) ‡∏£‡∏≠‡∏à‡∏ô Postgres ‡∏û‡∏£‡πâ‡∏≠‡∏°
>
> ```yaml
> healthcheck:
>   test: ["CMD-SHELL", "pg_isready -U postgres"]
>   interval: 5s
>   timeout: 3s
>   retries: 10
> ```

### ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î (Compose) {#‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î-compose}

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1** `version: "3.8"` ‚Äì ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡πÄ‡∏õ‡∏Ñ‡∏Ç‡∏≠‡∏á compose file
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 3** `services:` ‚Äì ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏£‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 4** `postgres:` ‚Äì ‡∏ä‡∏∑‡πà‡∏≠ service = `postgres` (‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô hostname ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô network ‡∏Ç‡∏≠‡∏á compose)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 5** `image: postgres:17` ‚Äì ‡πÉ‡∏ä‡πâ image official ‡∏Ç‡∏≠‡∏á Postgres ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 17
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 6-7** `ports: "5432:5432"` ‚Äì map ‡∏û‡∏≠‡∏£‡πå‡∏ï 5432 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏≠‡∏≠‡∏Å‡∏™‡∏π‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á host ‚Üí ‡πÅ‡∏≠‡∏õ‡∏£‡∏±‡∏ô‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô `localhost:5432`
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 8-11** `environment:` ‚Äì ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á DB (user, password, db name)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 12-13** `volumes:` ‚Äì ‡∏ú‡∏π‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏Å‡∏±‡∏ö volume ‡∏ä‡∏∑‡πà‡∏≠ `postgres_data` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ data ‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£ restart/upgrade
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 15-16** `volumes:` ‚Äì ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® volume ‡∏ä‡∏∑‡πà‡∏≠ `postgres_data`

**‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß ‡πÜ**

```bash
docker compose up -d          # ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ï Postgres
docker compose logs -f postgres
docker compose ps
```

---

## ‡∏£‡∏±‡∏ô‡πÅ‡∏≠‡∏õ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Postgres ‡πÉ‡∏ô Docker)

1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏î‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå Postgres ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GORM

```bash
go get gorm.io/driver/postgres
```

2. ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```bash
docker compose up -d
```

3. ‡∏£‡∏±‡∏ô‡πÅ‡∏≠‡∏õ (‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)

```bash
go run .     # ‡∏´‡∏£‡∏∑‡∏≠ go run main.go
```

> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á **host** ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `host=localhost` ‡πÉ‡∏ô DSN (‡∏î‡∏π‡πÉ‡∏ô `main.go` ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)

---

## ‡πÑ‡∏ü‡∏•‡πå `main.go` ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î

> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ï‡∏≤‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡∏°‡∏≤ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏≠‡∏≤‡∏à‡∏ï‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö import) ‚Äî ‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏≠ mapping ‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì **\[1‚Äì38]**

```go
1  package main

3  import (
4      "automated-golang/internal/user"
5      "fmt"
6      "log"

8      "github.com/gofiber/fiber/v2"
9      "gorm.io/driver/postgres"
10     "gorm.io/gorm"
11 )

13 func main() {
14     dsn := fmt.Sprintf(
15         "host=%s port=%s user=%s password=%s dbname=%s sslmode=disable timezone=Asia/Bangkok",
16         "localhost",
17         "5432",
18         "postgres",
19         "postgres",
20         "postgres",
21     )
22     db, err := gorm.Open(postgres.Open(dsn), &gorm.Config{})
23     if err != nil {
24         log.Fatal(err)
25     }
26     if err := db.AutoMigrate(&user.User{}); err != nil {
27         log.Fatal(err)
28     }

30     repo := user.NewGormRepository(db)
31     svc := user.NewService(repo)

33     app := fiber.New()
34     user.RegisterRoutes(app, svc)

36     log.Println("listening on :8080")
37     log.Fatal(app.Listen(":8080"))
38 }
```

### ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏µ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏á

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1**: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à `main` ‚Äì ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ô

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 3‚Äì11 (imports)**:

  - `internal/user` ‚Äì ‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÇ‡∏î‡πÄ‡∏°‡∏ô user ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ (model/repo/service/handler)
  - `fmt`, `log` ‚Äì ‡πÉ‡∏ä‡πâ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ DSN ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏°‡∏û‡πå log/fatal
  - `github.com/gofiber/fiber/v2` ‚Äì ‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏ü‡∏£‡∏°‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTTP server
  - `gorm.io/driver/postgres` + `gorm.io/gorm` ‚Äì ORM ‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå Postgres

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 13**: ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏° `func main()`

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 14‚Äì21 (‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö DSN)**: ‡∏™‡∏£‡πâ‡∏≤‡∏á connection string ‡∏Ç‡∏≠‡∏á Postgres ‡∏î‡πâ‡∏ß‡∏¢ `fmt.Sprintf`

  - `host=localhost` ‚Äì ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÅ‡∏≠‡∏õ‡∏£‡∏±‡∏ô‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á host ‡πÅ‡∏•‡∏∞ Postgres ‡∏ñ‡∏π‡∏Å map ‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (‡∏à‡∏≤‡∏Å compose)
  - `port=5432` ‚Äì ‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á Postgres
  - `user/password/dbname` ‚Äì ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô compose
  - `sslmode=disable` ‚Äì ‡∏õ‡∏¥‡∏î SSL (‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö local dev)
  - `timezone=Asia/Bangkok` ‚Äì ‡πÄ‡∏ã‡πá‡∏ï‡πÇ‡∏ã‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ (‡∏Ç‡πâ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö `TimeZone=Asia/Bangkok` ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà-‡πÄ‡∏•‡πá‡∏Å‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå; ‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà ‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ **`TimeZone`**)

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 22**: ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ DB ‡∏î‡πâ‡∏ß‡∏¢ GORM ‡πÇ‡∏î‡∏¢‡∏™‡πà‡∏á DSN ‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå `postgres`

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 23‚Äì25**: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Üí `log.Fatal` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå error

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 26‚Äì28 (AutoMigrate)**: ‡πÉ‡∏´‡πâ GORM ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏≠‡∏±‡∏õ‡∏™‡∏Ñ‡∏µ‡∏°‡∏≤ table ‡∏Ç‡∏≠‡∏á `user.User` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö struct (field, index, unique constraint)

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 30‚Äì31 (Wire dependencies)**:

  - ‡∏™‡∏£‡πâ‡∏≤‡∏á `repo := user.NewGormRepository(db)` ‚Äì repository layer ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö DB ‡∏à‡∏£‡∏¥‡∏á
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á `svc := user.NewService(repo)` ‚Äì business logic layer (validate, hash password, map error)

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 33‚Äì34 (‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå)**:

  - `fiber.New()` ‚Äì ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏õ HTTP
  - `user.RegisterRoutes(app, svc)` ‚Äì ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á `/users` (POST) ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö service

- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 36‚Äì37 (Start server)**:

  - log ‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏ü‡∏±‡∏á‡∏ö‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï `:8080`
  - `app.Listen(":8080")` ‚Äì ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á HTTP; ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ error ‡πÉ‡∏î ‡πÜ ‡∏Å‡πá `log.Fatal` ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°

> ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏¢‡πâ‡∏≤‡∏¢‡πÅ‡∏≠‡∏õ‡∏£‡∏±‡∏ô ‚Äú‡πÉ‡∏ô Compose ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‚Äù ‡∏Å‡∏±‡∏ö Postgres ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô DSN ‡πÄ‡∏õ‡πá‡∏ô `host=postgres` (‡∏ä‡∏∑‡πà‡∏≠ service) ‡πÅ‡∏ó‡∏ô `localhost`

---

## ‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô `internal/user`

‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡πÅ‡∏¢‡∏Å‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡πâ‡∏î‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

### `model.go`

- Struct `User` ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á: `ID`, `Email` (unique), `Name`, `PasswordHash`, `CreatedAt`
- DTO: `CreateUserRequest`, `CreateUserResponse` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö/‡∏™‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô API

### `repository.go`

- ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ü‡∏ã `Repository` ‡∏Å‡∏≥‡∏´‡∏ô‡∏î method ‡∏´‡∏•‡∏±‡∏Å: `Create`, `FindByEmail`
- `NewGormRepository(db)` ‚Äì ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á repository ‡∏ö‡∏ô GORM
- `Create(u *User)` ‚Äì ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `db.Create(u)` ‡πÅ‡∏•‡πâ‡∏ß **map error** ‡∏Ç‡∏≠‡∏á Postgres

  - Duplicate email: Postgres error code **`23505`** ‚Üí ‡∏Ñ‡∏∑‡∏ô `ErrDuplicateEmail`

- **‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**: ‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡∏Å‡∏û‡∏±‡∏ô‡∏Å‡∏±‡∏ö GORM/SQL ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡∏µ‡πâ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Service ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ mock ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô Unit test

### `service.go`

- ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ü‡∏ã `Service` ‡∏°‡∏µ `Create(ctx, req)`
- Flow ‡∏Ç‡∏≠‡∏á `Create`:

  1. `ValidateCreate(req)` ‚Äì ‡∏ï‡∏£‡∏ß‡∏à name/email/password
  2. `bcrypt.GenerateFromPassword` ‚Äì ‡πÅ‡∏Æ‡∏ä‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
  3. ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö `User{...}` ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `repo.Create`
  4. ‡∏Ñ‡∏∑‡∏ô `CreateUserResponse` (‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô hash ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ)

### `validator.go`

- ‡∏Å‡∏é‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥: name ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á, email ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ `@`, password ‚â• 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
- ‡πÅ‡∏¢‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏¢‡∏Å‡πÅ‡∏•‡∏∞ reuse ‡∏á‡πà‡∏≤‡∏¢

### `handler.go`

- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `RegisterRoutes(app, svc)` ‡∏ú‡∏π‡∏Å **POST `/users`**
- ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÉ‡∏ô handler:

  1. `c.BodyParser(&req)` ‚Äì ‡πÅ‡∏õ‡∏•‡∏á JSON ‚Üí struct
  2. `svc.Create(...)`
  3. ‡πÅ‡∏°‡∏õ error ‚Üí HTTP status:

     - `ErrBadEmail|ErrBadPassword|ErrBadName` ‚Üí **400**
     - `ErrDuplicateEmail` ‚Üí **409**
     - ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‚Üí **500**

  4. ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Üí **201 Created** ‡∏û‡∏£‡πâ‡∏≠‡∏° JSON response

---

## ‡∏™‡∏±‡∏ç‡∏ç‡∏≤ API (Contract)

- **POST** `/users`
- **Request (JSON)**

```json
{
  "email": "a@b.com",
  "name": "Alice",
  "password": "supersecret"
}
```

- **Success 201**

```json
{
  "id": 1,
  "email": "a@b.com",
  "name": "Alice",
  "createdAt": "2025-09-06T02:18:27Z"
}
```

- **Duplicate 409**

```json
{ "error": "email exists" }
```

- **Bad Request 400** (‡πÄ‡∏ä‡πà‡∏ô email ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)

```json
{ "error": "invalid email" }
```

**‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏£‡πá‡∏ß ‡πÜ**

```bash
curl -i -X POST http://localhost:8080/users \
  -H 'Content-Type: application/json' \
  -d '{"email":"a@b.com","name":"Alice","password":"supersecret"}'

curl -i -X POST http://localhost:8080/users \
  -H 'Content-Type: application/json' \
  -d '{"email":"a@b.com","name":"Dup","password":"supersecret"}'
```

---

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

> ‡πÄ‡∏ó‡∏™‡∏ï‡πå‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô ‡∏à‡∏±‡∏ö‡∏ö‡∏±‡πä‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡πà‡∏ô

### 1) Unit Tests

- `service_test.go` ‚Äì ‡∏ó‡∏î‡∏™‡∏≠‡∏ö business logic ‡∏î‡πâ‡∏ß‡∏¢ mock repo (‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏∞ DB)
- `handler_test.go` ‚Äì ‡∏ó‡∏î‡∏™‡∏≠‡∏ö HTTP handler ‡∏î‡πâ‡∏ß‡∏¢ fake service (‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏∞ DB)

### 2) Integration Test (Repository + Postgres ‡∏à‡∏£‡∏¥‡∏á)

- `repo_integration_postgres_test.go` ‚Äì ‡πÉ‡∏ä‡πâ **testcontainers-go** ‡∏™‡∏õ‡∏¥‡∏ô Postgres ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß, `AutoMigrate`, ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏î‡∏™‡∏≠‡∏ö `Create` + unique constraint (`23505`)
- ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ: ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö DB ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ 100%

### 3) E2E Test (HTTP flow ‡∏à‡∏£‡∏¥‡∏á)

- `e2e_test.go` ‚Äì ‡∏™‡∏£‡πâ‡∏≤‡∏á Fiber app + Service + Repository ‡∏ö‡∏ô **Postgres ‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå** ‚Üí ‡∏¢‡∏¥‡∏á `POST /users` 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ 409)

### ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏¥‡∏õ‡∏™‡πå

```bash
go test ./... -v
```

- ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î Docker ‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏° (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ Testcontainers)
- ‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏±‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡πÄ‡∏ó‡∏™‡∏ï‡πå:

```bash
go test ./internal/user -run TestE2E_ -v
```

---

## Troubleshooting & Notes

- **CGO / SQLite error**: ‡∏ñ‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡πÉ‡∏ä‡πâ SQLite (`go-sqlite3`) ‡∏Å‡∏±‡∏ö `CGO_ENABLED=0` ‡∏à‡∏∞‡πÄ‡∏à‡∏≠ `requires cgo` ‚Üí ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡πÅ‡∏Å‡πâ‡πÇ‡∏î‡∏¢ **‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ó‡∏™‡∏ï‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏õ‡πÉ‡∏ä‡πâ Postgres ‡∏ú‡πà‡∏≤‡∏ô Testcontainers** (‡∏Ç‡πâ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1)

  - ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏ä‡πâ SQLite ‡πÅ‡∏ö‡∏ö cgo-free ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå `github.com/glebarez/sqlite` (‡πÅ‡∏ï‡πà‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å Postgres)

- **TimeZone vs timezone**: ‡πÉ‡∏ô DSN ‡∏Ç‡∏≠‡∏á Postgres ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ `TimeZone=Asia/Bangkok` (‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏° convention) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏ö‡∏™‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÑ‡∏î‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå
- **Host ‡πÉ‡∏ô DSN**:

  - ‡πÅ‡∏≠‡∏õ‡∏£‡∏±‡∏ô‡∏ö‡∏ô **host** ‚Üí `host=localhost`
  - ‡πÅ‡∏≠‡∏õ‡∏£‡∏±‡∏ô‡πÉ‡∏ô **Compose ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô** ‡∏Å‡∏±‡∏ö Postgres ‚Üí `host=postgres` (‡∏ä‡∏∑‡πà‡∏≠ service)

- **Unique constraint**: ‡∏ï‡∏£‡∏ß‡∏à `pgconn.PgError{Code: "23505"}` ‡πÉ‡∏ô repository ‡πÄ‡∏û‡∏∑‡πà‡∏≠ map ‡πÄ‡∏õ‡πá‡∏ô `ErrDuplicateEmail` ‡πÉ‡∏´‡πâ handler ‡∏ï‡∏≠‡∏ö 409 ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

---

## Next Steps

- ‡πÄ‡∏û‡∏¥‡πà‡∏° **OpenAPI/Swagger** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ API ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡πÅ‡∏¢‡∏Å **config** ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å ENV ‡∏û‡∏£‡πâ‡∏≠‡∏° default (‡πÄ‡∏ä‡πà‡∏ô `DB_HOST`, `DB_PORT`, ...)
- ‡πÉ‡∏™‡πà **Makefile** / **Taskfile** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (`make up`, `make test`, `make run`)
- ‡πÄ‡∏û‡∏¥‡πà‡∏° **CI** (GitHub Actions) ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡πÄ‡∏ó‡∏™‡∏ï‡πå‡∏î‡πâ‡∏ß‡∏¢ Testcontainers ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏≠‡∏∑‡πà‡∏ô (‡πÄ‡∏ä‡πà‡∏ô GET /users/\:id, login, JWT, middleware rate limit)

---

‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏°‡πÅ‡∏ô‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ó‡∏™‡∏ï‡πå (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡πÉ‡∏ä‡πâ Testcontainers) ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á `testutil/postgres.go` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ reuse ‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå ‡∏ö‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏à‡∏±‡∏î‡∏ä‡∏∏‡∏î‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô üôå
